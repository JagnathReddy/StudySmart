<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body style="display: grid;grid-template-columns: 1fr 1fr;justify-content: center;align-content: center;">
    <div style= "display: flex; justify-content: center;" >
        <div style="display: flex;flex-direction: column;">
            <input type="file" id="pdf-file"  accept=".pdf">
            <input type="text" name="key" id="key">
            <button type="submit" onclick="send()">store</button>
        </div>
    </div>
    <div id="pdfdiv" style="display: flex; justify-content: center;" >
        <div style="display: flex;flex-direction: column">
            <input type="text" name="getkey" id="getkey">
            <button type="submit" onclick="get()">getPDF</button>
            <iframe src="" id="iframe" style="display:none; width: 500px; height:800px;"></iframe>
        </div>
    </div>
</body>
<script>
    
    const path="http://localhost:8000/protected/event/uploadFile"

function send(){
    const key=document.getElementById("key").value;
    if(key&&document.getElementById("pdf-file").value){
        const file = document.getElementById('pdf-file').files[0];
        const reader = new FileReader();
        reader.readAsDataURL(file);
        reader.onloadend = function () {
          const base64String = reader.result.replace('data:', '').replace(/^.+,/, '');
          navigator.clipboard.writeText(base64String)
          fetch(`${path}`, {
              method: "POST",
              body: JSON.stringify({
                  documentBase64:base64String,
                  key:key
              }),
              headers: {
              "Content-type": "application/json; charset=UTF-8",
              "tokenid":"eyJhbGciOiJSUzI1NiIsImtpZCI6IjgwNzhkMGViNzdhMjdlNGUxMGMzMTFmZTcxZDgwM2I5MmY3NjYwZGYiLCJ0eXAiOiJKV1QifQ.eyJuYW1lIjoiamFnbmF0aCByZWRkeSIsInBpY3R1cmUiOiJodHRwczovL2xoMy5nb29nbGV1c2VyY29udGVudC5jb20vYS9BQ2c4b2NJakFJNjVaakpLanJabVAtcG05c1FzSG04NUtYd3ZLeWVvWS1ydVdaRG09czk2LWMiLCJpc3MiOiJodHRwczovL3NlY3VyZXRva2VuLmdvb2dsZS5jb20vZ2J1aWxkLWUyOWJmIiwiYXVkIjoiZ2J1aWxkLWUyOWJmIiwiYXV0aF90aW1lIjoxNzEyMjA1MTAyLCJ1c2VyX2lkIjoiaUZ2a0dadFNPNGR2SlpBalVLSXpkclRZcWhOMiIsInN1YiI6ImlGdmtHWnRTTzRkdkpaQWpVS0l6ZHJUWXFoTjIiLCJpYXQiOjE3MTIyMDUxMDMsImV4cCI6MTcxMjIwODcwMywiZW1haWwiOiJqYWduYXRocmVkZHkyMDAzQGdtYWlsLmNvbSIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJmaXJlYmFzZSI6eyJpZGVudGl0aWVzIjp7Imdvb2dsZS5jb20iOlsiMTEwNTMyOTMxNTkyODk0NTY3NTk2Il0sImVtYWlsIjpbImphZ25hdGhyZWRkeTIwMDNAZ21haWwuY29tIl19LCJzaWduX2luX3Byb3ZpZGVyIjoiZ29vZ2xlLmNvbSJ9fQ.BtdIcnSzcNfWTyXq8R0QPXFNgRDvWsZG7qiz3wOiocHbLgwQ8MYlqmEIFBn7h8nS4ooR3WJIJ1DoeJwjXMSdxXvTm1WhD1qtRPRc0jnaetdTn42Da4zdgUgLUmIZbvIzxXsFIJ_B2tcOvWTiim5T7I4EXJNsuEZcq7Db2tpLfkxttab_inD2VzaI_OeLQ_usAGa_eBuwOQcCpP6jGfRlFGZL3JbSjlLiUGaew26VaK91eztJ0EOzUFX5p1m2B5tcSWev0d8pcInvIr6reEWx57fTC-1grDPJ3MslbER42P1fRLuWfmE6de_eINAUPGh96f350cVtGx6Kmbs5N-ubPQ"
              }
          })
          .then((response) => response.json())
          .then((json) => console.log(json));
          
        
        };
    }else{
        alert("Please enter values")
    }
}

async function get(){
    const keyget=document.getElementById("getkey").value;
    if(keyget){
        document.getElementById("iframe").src=path+"document/key/"+keyget
        document.getElementById("iframe").style.display="block"
    }else{
        alert("enter key")
    }
}
  
</script>
</html>